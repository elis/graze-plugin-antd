{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { useEffect } from 'react'\n\nexport default (options) => ({\n  client: client(options),\n  server: server(options)\n})\n\nconst client = options => ({\n  onLoad: () => {\n    options?.theme?.()\n  },\n  Wrapper: ({children}) => {\n    useEffect(() => {\n      const jssStyles = document.getElementById('antd-server-side')\n      if (jssStyles && jssStyles.parentNode) {\n        setTimeout(() => {\n          jssStyles.parentNode.removeChild(jssStyles)\n        }, 800)\n      }\n    }, [])\n\n    return children\n  }\n})\n\nconst server = options => ({\n  onRequest: () => ({}),\n  output: (props, markup) => {\n    const antd = require('antd/dist/antd.less')\n    const theme = options?.theme?.() ?? ''\n\n    const dropcss = require('dropcss');\n\n    let cleaned = dropcss({\n      html: `<html><body>${markup}</body></html>`,\n      css: `${theme}` || `${antd}`\n    })\n\n    return [`<style id=\"antd-server-side\">${cleaned.css}</style>`]\n  }\n})"],"names":["options","client","server","onLoad","theme","Wrapper","children","useEffect","jssStyles","document","getElementById","parentNode","setTimeout","removeChild","onRequest","output","props","markup","antd","require","dropcss","cleaned","html","css"],"mappings":";;;;AAEA,aAAe,UAACA,OAAD;AAAA,SAAc;AAC3BC,IAAAA,MAAM,EAAEA,MAAM,CAACD,OAAD,CADa;AAE3BE,IAAAA,MAAM,EAAEA,MAAM,CAACF,OAAD;AAFa,GAAd;AAAA,CAAf;;AAKA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAD,OAAO;AAAA,SAAK;AACzBG,IAAAA,MAAM,EAAE,kBAAM;AAAA;;AACZH,MAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,8BAAAA,OAAO,CAAEI,KAAT,uEAAAJ,OAAO;AACR,KAHwB;AAIzBK,IAAAA,OAAO,EAAE,uBAAgB;AAAA,UAAdC,QAAc,QAAdA,QAAc;AACvBC,MAAAA,eAAS,CAAC,YAAM;AACd,YAAMC,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,CAAlB;;AACA,YAAIF,SAAS,IAAIA,SAAS,CAACG,UAA3B,EAAuC;AACrCC,UAAAA,UAAU,CAAC,YAAM;AACfJ,YAAAA,SAAS,CAACG,UAAV,CAAqBE,WAArB,CAAiCL,SAAjC;AACD,WAFS,EAEP,GAFO,CAAV;AAGD;AACF,OAPQ,EAON,EAPM,CAAT;AASA,aAAOF,QAAP;AACD;AAfwB,GAAL;AAAA,CAAtB;;AAkBA,IAAMJ,MAAM,GAAG,SAATA,MAAS,CAAAF,OAAO;AAAA,SAAK;AACzBc,IAAAA,SAAS,EAAE;AAAA,aAAO,EAAP;AAAA,KADc;AAEzBC,IAAAA,MAAM,EAAE,gBAACC,KAAD,EAAQC,MAAR,EAAmB;AAAA;;AACzB,UAAMC,IAAI,GAAGC,OAAO,CAAC,qBAAD,CAApB;;AACA,UAAMf,KAAK,YAAGJ,OAAH,aAAGA,OAAH,0CAAGA,OAAO,CAAEI,KAAZ,oDAAG,qBAAAJ,OAAO,CAAV,yCAAyB,EAApC;;AAEA,UAAMoB,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AAEA,UAAIE,OAAO,GAAGD,OAAO,CAAC;AACpBE,QAAAA,IAAI,wBAAiBL,MAAjB,mBADgB;AAEpBM,QAAAA,GAAG,EAAE,UAAGnB,KAAH,eAAiBc,IAAjB;AAFe,OAAD,CAArB;AAKA,aAAO,0CAAiCG,OAAO,CAACE,GAAzC,cAAP;AACD;AAdwB,GAAL;AAAA,CAAtB;;;;"}